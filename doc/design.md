# ハンコフィールド

ハンコフィールドは、アプリでユーザが自分の印鑑をデザインし、注文できるサービスです。

- アプリフレームワーク: Flutter
- ウェブ: Cloud Run (Rust)
- 管理画面: Cloud Run (Rust)
- データベース: Firestore
- API: Cloud Run (Rust)
- ストレージ: Firebase Storage
- 認証: Firebase Auth
- 支払い: Stripe
- 管理画面/ウェブ: ポーリングやストリーミング（SSE / WebSocket 等）を実装しない
- 対応言語: 日本語（`ja`）/ 英語（`en`）を初期対応し、追加可能な多言語設計にする

## 関連ドキュメント
- Firebase Firestore 設計（本番向け・多言語対応）: `doc/firebase-firestore-design.md`

## タスク
- [x] 管理画面（`admin`）の初期モック実装を追加
- [x] 管理画面（`admin`）で `mock` / `dev` / `prod` のデータソース切替を追加
- [x] `api` / `admin` / `web` の実装言語を Rust に統一
- [x] 管理画面（`admin`）を注文管理・材質マスタ・材質マスタ編集のページに分割
- [x] 管理画面（`admin`）に材質マスタ作成ページを追加
- [x] 管理画面（`admin`）の材質マスタ一覧に削除導線と確認ダイアログを追加
- [x] 管理画面（`admin`）で材質写真（Storage パス）を登録・編集できるようにする
- [x] 管理画面（`admin`）で画像ファイルをアップロードし、材質写真の Storage パスを自動入力できるようにする
- [x] 管理画面（`admin`）の材質画像アップロードで即時プレビューとエラーフィードバックを表示する
- [x] 管理画面（`admin`）にフォントマスタ編集ページを追加
- [x] 管理画面（`admin`）で配送国マスタの送料を国ごとに編集できるようにする
- [x] 管理画面（`admin`）で配送国マスタを追加・削除できるようにする
- [x] 材質マスタに印面形状（角印/丸印）を保持できるようにする
- [x] `web` の候補生成を `api` の Gemini エンドポイント経由に切り替え、候補ごとに漢字・読み方（ひらがな/ローマ字）・言語指定理由を返す
- [x] `web` の候補生成で理由言語指定UIを廃止し画面ロケールを利用、性別（選択なし/男性/女性）指定を Gemini プロンプトに反映
- [x] `api` に Stripe Checkout Session 作成エンドポイントを追加
- [x] `web` の購入フローを Stripe Checkout に接続
