{{define "auth/login"}}
{{template "layouts/auth" .}}
{{end}}

{{define "auth/content"}}
<section class="rounded-2xl bg-white p-8 shadow-xl ring-1 ring-slate-200">
  <div class="mb-6 text-center">
    <h1 class="text-2xl font-semibold text-slate-900">Hanko Admin</h1>
    <p class="mt-2 text-sm text-slate-600">管理画面にログインしてください。</p>
  </div>
  {{if .Message}}
  <div class="mb-4 rounded-md border border-sky-100 bg-sky-50 px-4 py-3 text-sm text-slate-800">
    {{.Message}}
  </div>
  {{end}}
  {{if .Error}}
  <div class="mb-4 rounded-md border border-rose-100 bg-rose-50 px-4 py-3 text-sm text-rose-700">
    {{.Error}}
  </div>
  {{end}}
  <form method="post" action="{{.LoginPath}}" class="space-y-6">
    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}" />
    {{if .Next}}
    <input type="hidden" name="next" value="{{.Next}}" />
    {{end}}
    <div class="form-field">
      <label for="email" class="form-label">メールアドレス</label>
      <input
        id="email"
        name="email"
        type="email"
        class="form-control"
        value="{{.Email}}"
        autocomplete="email"
        autofocus
      />
    </div>
    <div class="form-field">
      <label for="password" class="form-label">パスワード</label>
      <input
        id="password"
        name="password"
        type="password"
        class="form-control"
        autocomplete="current-password"
      />
    </div>
    <div class="form-field">
      <label for="id_token" class="form-label">ID トークン (任意)</label>
      <textarea
        id="id_token"
        name="id_token"
        class="form-control"
        placeholder="Firebase Auth などで取得した ID トークンを貼り付けてください。"
        autocomplete="off"
      ></textarea>
      <p class="form-help">Google / Apple などのフェデレーションログインでは、発行された ID トークンを送信してください。開発環境では任意の値でログインできます。</p>
    </div>
    <div class="flex items-center justify-between text-sm">
      <label class="flex items-center gap-2 text-slate-600">
        <input
          type="checkbox"
          name="remember"
          value="1"
          class="h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-600"
          {{if .Remember}}checked{{end}}
        />
        <span>ログイン状態を保持する</span>
      </label>
      <a href="https://firebase.google.com/docs/auth" class="text-indigo-600 hover:text-indigo-500" target="_blank" rel="noreferrer">フェデレーション設定ガイド</a>
    </div>
    <div class="space-y-3">
      <button type="submit" class="btn btn-primary btn-md w-full">ログイン</button>
      <p class="text-center text-xs text-slate-500">エラーが続く場合はシステム管理者まで連絡してください。</p>
    </div>
  </form>
</section>
<p class="mt-6 text-center text-xs text-slate-500">© Hanko Field</p>
{{end}}
