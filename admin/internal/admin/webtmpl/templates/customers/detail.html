{{define "customers/detail-index"}}
{{template "layouts/base" .}}
{{end}}

{{define "customers/detail-content"}}
{{$page := .Page}}
<div
  id="customer-detail"
  class="space-y-6"
  data-customer-detail
  {{if $page.RefreshURL}}
    hx-get="{{$page.RefreshURL}}"
    hx-trigger="refresh from:body"
    hx-target="this"
    hx-swap="outerHTML"
  {{end}}
>
  {{template "customers/detail-header" $page}}
  <div class="grid gap-6 xl:grid-cols-[minmax(0,1fr)_22rem]">
    <div class="space-y-6">
      {{template "customers/detail-metrics" $page.Metrics}}
      <div id="customer-tabs">
        {{template "customers/tabs" $page}}
      </div>
    </div>
    <aside class="space-y-4">
      {{template "customers/info-rail" $page.InfoRail}}
      <section class="rounded-2xl border border-slate-200 bg-white px-5 py-4 shadow-sm">
        <div class="text-xs font-semibold uppercase tracking-wide text-slate-500">æœ€çµ‚æ›´æ–°</div>
        <p class="mt-1 text-sm font-medium text-slate-900">{{$page.LastUpdated}}</p>
        {{if $page.LastRelative}}
          <p class="text-xs text-slate-500">{{$page.LastRelative}}</p>
        {{end}}
      </section>
    </aside>
  </div>
</div>
{{end}}

{{define "customers/detail-header"}}
{{$header := .Header}}
<section class="rounded-2xl bg-white px-6 py-6 shadow-sm ring-1 ring-slate-200">
  <div class="flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between">
    <div class="flex flex-1 flex-col gap-4">
      <div class="flex items-start gap-4">
        <div class="flex h-16 w-16 items-center justify-center overflow-hidden rounded-full bg-indigo-100 text-2xl font-semibold text-indigo-700">
          {{if $header.AvatarURL}}
            <img src="{{$header.AvatarURL}}" alt="{{printf "%sã®ã‚¢ãƒã‚¿ãƒ¼" $header.DisplayName}}" class="h-full w-full object-cover" />
          {{else}}
            <span>{{$header.AvatarInitial}}</span>
          {{end}}
        </div>
        <div class="space-y-2">
          <div class="flex flex-wrap items-center gap-2">
            <h1 class="text-2xl font-semibold text-slate-900">{{$header.DisplayName}}</h1>
            {{if $header.StatusLabel}}
              {{template "components/badge" (dict "Label" $header.StatusLabel "Tone" $header.StatusTone)}}
            {{end}}
            {{if $header.TierLabel}}
              {{template "components/badge" (dict "Label" $header.TierLabel "Tone" $header.TierTone)}}
            {{end}}
          </div>
          <div class="flex flex-wrap items-center gap-3 text-sm text-slate-600">
            {{if $header.Email}}
              <a href="{{printf "mailto:%s" $header.Email}}" class="inline-flex items-center gap-1 text-slate-600 hover:text-slate-900">
                âœ‰ {{$header.Email}}
              </a>
            {{end}}
            {{if $header.Phone}}
              <span class="inline-flex items-center gap-1">ğŸ“ {{$header.Phone}}</span>
            {{end}}
            {{if $header.Company}}
              <span class="inline-flex items-center gap-1">ğŸ¢ {{$header.Company}}</span>
            {{end}}
            {{if $header.Location}}
              <span class="inline-flex items-center gap-1">ğŸ“ {{$header.Location}}</span>
            {{end}}
          </div>
          <p class="text-sm text-slate-500">{{.Description}}</p>
        </div>
      </div>
      <div class="grid gap-4 text-sm text-slate-600 sm:grid-cols-2 lg:grid-cols-4">
        <div>
          <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">é¡§å®¢ ID</dt>
          <dd class="mt-1 font-mono text-sm text-slate-900">{{$header.CustomerID}}</dd>
        </div>
        <div>
          <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">ç´¯è¨ˆæ³¨æ–‡</dt>
          <dd class="mt-1 font-semibold text-slate-900">{{$header.TotalOrdersLabel}}</dd>
        </div>
        <div>
          <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">ç´¯è¨ˆå£²ä¸Š</dt>
          <dd class="mt-1 font-semibold text-slate-900">{{$header.LTVLabel}}</dd>
        </div>
        <div>
          <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">ç™»éŒ²æ—¥</dt>
          <dd class="mt-1 text-slate-900">{{$header.JoinedLabel}}</dd>
        </div>
        <div>
          <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">æœ€çµ‚æ³¨æ–‡</dt>
          <dd class="mt-1 text-slate-900">{{fallback $header.LastOrderLabel "æœªæ³¨æ–‡"}}</dd>
        </div>
      </div>
      {{if gt (len $header.Tags) 0}}
        <div class="flex flex-wrap gap-2">
          {{range $tag := $header.Tags}}
            <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600">{{$tag}}</span>
          {{end}}
        </div>
      {{end}}
      {{if gt (len $header.Flags) 0}}
        <div class="flex flex-wrap gap-2">
          {{range $badge := $header.Flags}}
            {{template "components/badge" (dict "Label" (printf "%s %s" $badge.Icon $badge.Label) "Tone" $badge.Tone)}}
          {{end}}
        </div>
      {{end}}
    </div>
    <div class="flex flex-col gap-3 sm:flex-row sm:items-start">
      {{if $header.RiskLabel}}
        <div class="rounded-2xl border border-slate-200 bg-slate-50 px-4 py-4 text-sm text-slate-700">
          <p class="flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-slate-500">
            ãƒªã‚¹ã‚¯
            {{template "components/badge" (dict "Label" $header.RiskLabel "Tone" $header.RiskTone)}}
          </p>
          {{if $header.RiskDescription}}
            <p class="mt-2 text-sm text-slate-600">{{$header.RiskDescription}}</p>
          {{end}}
        </div>
      {{end}}
    </div>
  </div>
  {{if gt (len $header.QuickActions) 0}}
    <div class="mt-6 flex flex-wrap gap-2">
      {{range $action := $header.QuickActions}}
        {{if $action.Href}}
          <a
            href="{{$action.Href}}"
            class="{{buttonClass $action.Variant "md" false false}}"
            {{range $k, $v := $action.Attrs}} {{$k}}="{{$v}}"{{end}}
          >
            {{$action.Label}}
          </a>
        {{else}}
          <button
            type="button"
            class="{{buttonClass $action.Variant "md" false false}}"
            {{range $k, $v := $action.Attrs}} {{$k}}="{{$v}}"{{end}}
          >
            {{$action.Label}}
          </button>
        {{end}}
      {{end}}
    </div>
  {{end}}
</section>
{{end}}

{{define "customers/detail-metrics"}}
{{if gt (len .) 0}}
  <section class="rounded-2xl bg-white px-6 py-6 shadow-sm ring-1 ring-slate-200">
    <div class="grid gap-4 sm:grid-cols-2 xl:grid-cols-4">
      {{range $metric := .}}
        <div class="rounded-xl border border-slate-200 px-4 py-3">
          <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">{{$metric.Label}}</p>
          <p class="mt-2 text-2xl font-semibold text-slate-900">{{$metric.Value}}</p>
          {{if $metric.SubLabel}}
            <p class="mt-1 text-xs text-slate-500">{{$metric.SubLabel}}</p>
          {{end}}
          {{if $metric.TrendLabel}}
            <p class="{{customersTrendToneClass $metric.TrendTone}}">{{$metric.TrendIcon}} {{$metric.TrendLabel}}</p>
          {{end}}
        </div>
      {{end}}
    </div>
  </section>
{{end}}
{{end}}

{{define "customers/tabs"}}
{{$page := .}}
<div class="space-y-4">
  {{if gt (len $page.Tabs) 0}}
    <div class="border-b border-slate-200">
      <nav class="flex flex-wrap items-center gap-2" aria-label="ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ãƒ–">
        {{range $tab := $page.Tabs}}
          {{$href := customersUnderlineTabHref $tab.Href $tab.ID}}
          <a
            href="{{$href}}"
            class="{{customersUnderlineTabClass $tab.Active}}"
            {{if $tab.Active}}aria-current="true"{{end}}
            data-tab="{{$tab.ID}}"
            hx-get="{{$href}}"
            hx-target="#customer-tabs"
            hx-swap="outerHTML"
            hx-push-url="true"
          >
            <span>{{$tab.Label}}</span>
            {{if $tab.Badge}}
              <span class="ml-2 inline-flex min-w-[1.5rem] justify-center rounded-full bg-slate-200 px-2 py-0.5 text-xs text-slate-600">{{$tab.Badge}}</span>
            {{end}}
          </a>
        {{end}}
      </nav>
    </div>
  {{end}}
  <div class="rounded-2xl border border-slate-200 bg-white shadow-sm">
    <div class="space-y-6 px-6 py-6">
      {{if eq $page.ActiveTab "overview"}}
        {{template "customers/overview-tab" $page.Overview}}
      {{else if eq $page.ActiveTab "orders"}}
        {{template "customers/orders-tab" $page.Orders}}
      {{else if eq $page.ActiveTab "addresses"}}
        {{template "customers/addresses-tab" $page.Addresses}}
      {{else if eq $page.ActiveTab "payments"}}
        {{template "customers/payments-tab" $page.Payments}}
      {{else if eq $page.ActiveTab "notes"}}
        {{template "customers/notes-tab" $page.Notes}}
      {{else if eq $page.ActiveTab "activity"}}
        {{template "customers/activity-tab" $page.Activity}}
      {{else}}
        <p class="text-sm text-slate-500">è¡¨ç¤ºã§ãã‚‹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      {{end}}
    </div>
  </div>
</div>
{{end}}

{{define "customers/overview-tab"}}
<section class="space-y-6">
  <div class="space-y-4">
    <div>
      <h2 class="text-xl font-semibold text-slate-900">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ¦‚è¦</h2>
      <p class="text-sm text-slate-600">åŸºæœ¬æƒ…å ±ã¨ç›´è¿‘ã®æ³¨æ–‡çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>
    </div>
    {{if gt (len .Summary) 0}}
      <dl class="grid gap-4 text-sm text-slate-600 sm:grid-cols-2">
        {{range $field := .Summary}}
          <div>
            <dt class="text-xs font-semibold uppercase tracking-wide text-slate-500">{{$field.Label}}</dt>
            <dd class="mt-1 text-slate-900">
              {{if not (trimSpace $field.Value)}}
                <span class="text-slate-400">-</span>
              {{else if $field.Href}}
                <a href="{{$field.Href}}" class="text-brand-600 hover:text-brand-500">{{$field.Value}}</a>
              {{else}}
                {{$field.Value}}
              {{end}}
            </dd>
          </div>
        {{end}}
      </dl>
    {{end}}
  </div>
  {{if gt (len .Tags) 0}}
    <div class="space-y-2">
      <h3 class="text-sm font-semibold text-slate-700">ã‚¿ã‚°</h3>
      <div class="flex flex-wrap gap-2">
        {{range $tag := .Tags}}
          <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600">{{$tag}}</span>
        {{end}}
      </div>
    </div>
  {{end}}
  {{if gt (len .Flags) 0}}
    <div class="space-y-2">
      <h3 class="text-sm font-semibold text-slate-700">ãƒ•ãƒ©ã‚°</h3>
      <div class="flex flex-wrap gap-2">
        {{range $badge := .Flags}}
          {{template "components/badge" (dict "Label" (printf "%s %s" $badge.Icon $badge.Label) "Tone" $badge.Tone)}}
        {{end}}
      </div>
    </div>
  {{end}}
  {{if gt (len .RecentOrders) 0}}
    <div class="space-y-4">
      <h3 class="text-sm font-semibold text-slate-700">æœ€è¿‘ã®æ³¨æ–‡</h3>
      <div class="space-y-3">
        {{range $order := .RecentOrders}}
          <a href="{{$order.Href}}" class="block rounded-xl border border-slate-200 px-4 py-4 transition hover:border-brand-300 hover:shadow-sm">
            <div class="flex flex-wrap items-center justify-between gap-2">
              <div>
                <p class="font-semibold text-slate-900">{{$order.Number}}</p>
                <p class="text-xs text-slate-500">{{$order.PlacedDate}}</p>
              </div>
              {{template "components/badge" (dict "Label" $order.Status "Tone" $order.StatusTone)}}
            </div>
            {{if $order.Detail}}
              <p class="mt-2 text-sm text-slate-600">{{$order.Detail}}</p>
            {{end}}
            <div class="mt-2 flex flex-wrap gap-4 text-xs text-slate-500">
              <span>æ”¯æ‰•ã„: {{$order.Payment}}</span>
              <span>ãƒ•ãƒ«ãƒ•ã‚£ãƒ«ãƒ¡ãƒ³ãƒˆ: {{$order.Fulfillment}}</span>
              <span class="font-semibold text-slate-900">{{$order.Total}}</span>
            </div>
          </a>
        {{end}}
      </div>
    </div>
  {{else}}
    <p class="text-sm text-slate-500">ã¾ã æ³¨æ–‡å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {{end}}
</section>
{{end}}

{{define "customers/orders-tab"}}
{{if eq (len .Rows) 0}}
  <p class="text-sm text-slate-500">{{fallback .EmptyMessage "æ³¨æ–‡å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}}</p>
{{else}}
  <div class="overflow-hidden rounded-xl border border-slate-200">
    <table class="min-w-full divide-y divide-slate-200 text-sm">
      <thead class="bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500">
        <tr>
          <th scope="col" class="px-4 py-3 text-left">æ³¨æ–‡</th>
          <th scope="col" class="px-4 py-3 text-left">æ—¥æ™‚</th>
          <th scope="col" class="px-4 py-3 text-left">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
          <th scope="col" class="px-4 py-3 text-left">æ”¯æ‰•ã„</th>
          <th scope="col" class="px-4 py-3 text-left">ãƒ•ãƒ«ãƒ•ã‚£ãƒ«ãƒ¡ãƒ³ãƒˆ</th>
          <th scope="col" class="px-4 py-3 text-right">åˆè¨ˆ</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-200 bg-white">
        {{range $row := .Rows}}
          <tr>
            <td class="px-4 py-3">
              <a href="{{$row.Href}}" class="font-semibold text-brand-600 hover:text-brand-500">{{$row.Number}}</a>
              <p class="text-xs text-slate-500">{{$row.Relative}}</p>
            </td>
            <td class="px-4 py-3 text-slate-600">{{$row.Date}}</td>
            <td class="px-4 py-3">
              {{template "components/badge" (dict "Label" $row.Status "Tone" $row.StatusTone)}}
            </td>
            <td class="px-4 py-3">
              {{template "components/badge" (dict "Label" $row.Payment "Tone" $row.PaymentTone)}}
            </td>
            <td class="px-4 py-3">
              {{template "components/badge" (dict "Label" $row.Fulfillment "Tone" $row.FulfillmentTone)}}
            </td>
            <td class="px-4 py-3 text-right font-semibold text-slate-900">{{$row.Total}}</td>
          </tr>
        {{end}}
      </tbody>
    </table>
  </div>
{{end}}
{{end}}

{{define "customers/addresses-tab"}}
{{if eq (len .Cards) 0}}
  <p class="text-sm text-slate-500">{{fallback .EmptyMessage "ä½æ‰€æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}}</p>
{{else}}
  <div class="grid gap-4 md:grid-cols-2">
    {{range $card := .Cards}}
      <div class="space-y-3 rounded-2xl border border-slate-200 px-4 py-4 shadow-sm">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-sm font-semibold text-slate-900">{{fallback $card.Title "ä½æ‰€"}}</h3>
            <p class="text-xs text-slate-500">{{$card.Updated}}</p>
          </div>
          {{template "components/badge" (dict "Label" $card.TypeLabel "Tone" $card.TypeTone)}}
        </div>
        <div class="space-y-1 text-sm text-slate-700">
          {{if $card.Name}}<p>{{$card.Name}}</p>{{end}}
          {{if $card.Company}}<p>{{$card.Company}}</p>{{end}}
          {{range $line := $card.Lines}}
            {{if trimSpace $line}}<p>{{$line}}</p>{{end}}
          {{end}}
          {{if $card.Phone}}<p class="text-xs text-slate-500">TEL: {{$card.Phone}}</p>{{end}}
        </div>
        {{if gt (len $card.Notes) 0}}
          <ul class="list-disc space-y-1 pl-4 text-xs text-slate-500">
            {{range $note := $card.Notes}}
              <li>{{$note}}</li>
            {{end}}
          </ul>
        {{end}}
        {{if $card.Primary}}
          {{template "components/badge" (dict "Label" "æ—¢å®š" "Tone" "success")}}
        {{end}}
      </div>
    {{end}}
  </div>
{{end}}
{{end}}

{{define "customers/payments-tab"}}
{{if eq (len .Rows) 0}}
  <p class="text-sm text-slate-500">{{fallback .EmptyMessage "ä¿å­˜ã•ã‚ŒãŸæ”¯æ‰•ã„æ–¹æ³•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}}</p>
{{else}}
  <div class="overflow-hidden rounded-xl border border-slate-200">
    <table class="min-w-full divide-y divide-slate-200 text-sm">
      <thead class="bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500">
        <tr>
          <th scope="col" class="px-4 py-3 text-left">ç¨®é¡</th>
          <th scope="col" class="px-4 py-3 text-left">ãƒ–ãƒ©ãƒ³ãƒ‰</th>
          <th scope="col" class="px-4 py-3 text-left">åç¾©</th>
          <th scope="col" class="px-4 py-3 text-left">æœ‰åŠ¹æœŸé™</th>
          <th scope="col" class="px-4 py-3 text-left">çŠ¶æ…‹</th>
          <th scope="col" class="px-4 py-3 text-left">ç™»éŒ²æ—¥</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-200 bg-white">
        {{range $row := .Rows}}
          <tr>
            <td class="px-4 py-3">
              <div class="font-semibold text-slate-900">{{$row.Type}}</div>
              {{if $row.Primary}}
                <p class="text-xs text-slate-500">ãƒ¡ã‚¤ãƒ³</p>
              {{end}}
            </td>
            <td class="px-4 py-3 text-slate-700">
              {{$row.Brand}}
              {{if $row.Last4}}
                <span class="ml-2 text-xs text-slate-500">â€¢â€¢â€¢â€¢ {{$row.Last4}}</span>
              {{end}}
            </td>
            <td class="px-4 py-3 text-slate-600">{{$row.Holder}}</td>
            <td class="px-4 py-3 text-slate-600">{{fallback $row.Expires "-"}}</td>
            <td class="px-4 py-3">
              {{template "components/badge" (dict "Label" $row.Status "Tone" $row.StatusTone)}}
            </td>
            <td class="px-4 py-3 text-slate-600">{{$row.Added}}</td>
          </tr>
        {{end}}
      </tbody>
    </table>
  </div>
{{end}}
{{end}}

{{define "customers/notes-tab"}}
{{if eq (len .Notes) 0}}
  <p class="text-sm text-slate-500">{{fallback .EmptyMessage "ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒ¢ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"}}</p>
{{else}}
  <div class="space-y-4">
    {{range $note := .Notes}}
      <article class="{{customersNoteCardClass $note.Tone}}">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <div>
            <h3 class="text-sm font-semibold text-slate-900">{{$note.Title}}</h3>
            <p class="text-xs text-slate-500">{{$note.Author}}</p>
          </div>
          <span class="text-xs text-slate-500">{{$note.Visibility}}</span>
        </div>
        <p class="mt-3 whitespace-pre-wrap text-sm text-slate-700">{{$note.Body}}</p>
        <div class="mt-3 flex flex-wrap items-center justify-between gap-3 text-xs text-slate-500">
          <span>{{$note.Created}} ({{$note.Relative}})</span>
          {{if gt (len $note.Tags) 0}}
            <div class="flex flex-wrap gap-2">
              {{range $tag := $note.Tags}}
                <span class="rounded-full bg-white/40 px-2 py-0.5 text-xs text-slate-700">{{$tag}}</span>
              {{end}}
            </div>
          {{end}}
        </div>
      </article>
    {{end}}
  </div>
{{end}}
{{end}}

{{define "customers/activity-tab"}}
{{if eq (len .Items) 0}}
  <p class="text-sm text-slate-500">{{fallback .EmptyMessage "ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}}</p>
{{else}}
  <div class="space-y-4">
    {{range $item := .Items}}
      <div class="flex gap-3 rounded-2xl border border-slate-200 px-4 py-4">
        <div class="flex h-10 w-10 items-center justify-center rounded-full bg-indigo-100 text-lg">
          {{fallback $item.Icon "ğŸ“"}}
        </div>
        <div class="flex-1 space-y-1">
          <div class="flex flex-wrap items-center justify-between gap-2">
            <p class="font-semibold text-slate-900">{{$item.Title}}</p>
            <span class="text-xs text-slate-500">{{$item.Time}} ({{$item.Relative}})</span>
          </div>
          <p class="text-xs text-slate-500">
            {{$item.Actor}}
            {{if trimSpace $item.ActorRole}}
              <span class="ml-1 text-xs text-slate-400">{{printf "(%s)" $item.ActorRole}}</span>
            {{end}}
          </p>
          {{if $item.Description}}
            <p class="text-sm text-slate-600">{{$item.Description}}</p>
          {{end}}
        </div>
      </div>
    {{end}}
  </div>
{{end}}
{{end}}

{{define "customers/info-rail"}}
<section class="rounded-2xl border border-slate-200 bg-white px-5 py-5 shadow-sm">
  <div class="space-y-4">
    <div>
      <h2 class="text-base font-semibold text-slate-900">ã‚µãƒãƒ¼ãƒˆæƒ…å ±</h2>
      <p class="text-xs text-slate-500">ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€æœ¬äººç¢ºèªã€é–¢é€£é€£çµ¡å…ˆã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</p>
    </div>
    {{if .RiskLabel}}
      <div class="rounded-xl border border-slate-200 bg-slate-50 px-4 py-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">ãƒªã‚¹ã‚¯è©•ä¾¡</p>
        <div class="mt-2 flex items-center gap-2">
          {{template "components/badge" (dict "Label" .RiskLabel "Tone" .RiskTone)}}
          <span class="text-sm text-slate-600">{{.RiskDescription}}</span>
        </div>
      </div>
    {{end}}
    {{if gt (len .Segments) 0}}
      <div class="space-y-2">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ</p>
        <div class="flex flex-wrap gap-2">
          {{range $segment := .Segments}}
            <span class="rounded-full bg-slate-100 px-2 py-0.5 text-xs text-slate-600">{{$segment}}</span>
          {{end}}
        </div>
      </div>
    {{end}}
    {{if gt (len .Flags) 0}}
      <div class="space-y-2">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">ãƒ•ãƒ©ã‚°</p>
        <div class="flex flex-wrap gap-2">
          {{range $flag := .Flags}}
            {{template "components/badge" (dict "Label" (printf "%s %s" $flag.Icon $flag.Label) "Tone" $flag.Tone)}}
          {{end}}
        </div>
      </div>
    {{end}}
    {{range $section := .Sections}}
      <div class="space-y-2">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">{{$section.Title}}</p>
        <ul class="space-y-2">
          {{range $item := $section.Items}}
            <li class="rounded-xl border border-slate-200 px-3 py-3">
              <p class="font-medium text-slate-900">{{$item.Label}}</p>
              {{if $item.Description}}
                <p class="text-sm text-slate-600">{{$item.Description}}</p>
              {{end}}
              <div class="mt-2 flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500">
                {{if $item.Meta}}
                  <span>{{$item.Meta}}</span>
                {{end}}
                {{if $item.LinkURL}}
                  <a href="{{$item.LinkURL}}" class="text-brand-600 hover:text-brand-500">{{fallback $item.LinkLabel "è©³ç´°ã‚’è¦‹ã‚‹"}}</a>
                {{end}}
              </div>
            </li>
          {{end}}
        </ul>
      </div>
    {{end}}
  </div>
</section>
{{end}}
