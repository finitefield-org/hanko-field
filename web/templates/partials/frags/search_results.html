{{ define "frag_search_results" }}
{{ $view := . }}
<div class="space-y-2" data-search-results data-source="{{ $view.Source }}" data-count="{{ $view.Count }}">
  {{ if $view.Empty }}
    <div class="rounded-xl border border-dashed border-gray-200 bg-white/90 p-6 text-center text-sm text-gray-600">
      <p class="font-medium text-gray-800">{{ $view.EmptyLabel }}</p>
      {{ if $view.EmptyHelp }}<p class="mt-2 text-gray-500">{{ $view.EmptyHelp }}</p>{{ end }}
    </div>
  {{ else }}
    <ul role="list" class="space-y-2">
      {{ range $idx, $item := $view.Results }}
        <li>
          <div class="group relative">
            <button type="button" class="absolute right-3 top-3 hidden items-center justify-center rounded-full border border-gray-200 bg-white/90 p-1 text-gray-500 shadow-sm transition hover:border-indigo-200 hover:text-indigo-500 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40 group-hover:flex" data-search-pin data-pin-label="{{ $item.PlainLabel }}" data-pin-detail="{{ $item.PlainDetail }}" data-pin-href="{{ $item.Href }}" aria-label="{{ tlang $view.Lang "search.pin.add" }}" aria-pressed="false">
              <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path d="M6 2a2 2 0 00-2 2v1.586a1 1 0 01-.293.707L2.414 7.586A2 2 0 004.828 11L5 10.828V14l4-2 4 2v-3.172l.172.172A2 2 0 0017.586 7.586l-1.293-1.293A1 1 0 0116 5.586V4a2 2 0 00-2-2H6z" />
              </svg>
            </button>
            <a href="{{ $item.Href }}" class="relative flex gap-4 rounded-xl border border-gray-200/80 bg-white/95 p-4 shadow-sm transition hover:border-indigo-200 hover:shadow-md focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-result data-result-index="{{ $idx }}">
            <span class="flex h-10 w-10 flex-none items-center justify-center rounded-lg {{ $item.Accent }}">
              {{ if $item.Icon }}
                {{ template "icon" (dict "Name" $item.Icon "Class" "h-5 w-5") }}
              {{ else }}
                <span class="text-xs font-semibold uppercase text-gray-600">HF</span>
              {{ end }}
            </span>
            <span class="flex min-w-0 flex-1 flex-col gap-1">
              <span class="flex items-center gap-2">
                <span class="truncate text-sm font-medium leading-tight text-gray-900">{{ $item.Label }}</span>
                {{ if $item.Badge }}
                  <span class="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium {{ $item.BadgeTone }}">{{ $item.Badge }}</span>
                {{ end }}
              </span>
              {{ if $item.Detail }}
                <span class="line-clamp-1 text-sm text-gray-700">{{ $item.Detail }}</span>
              {{ end }}
              {{ if $item.Description }}
                <span class="text-sm text-gray-500">{{ $item.Description }}</span>
              {{ end }}
              {{ if $item.Meta }}
                <span class="flex flex-wrap gap-1.5 pt-1">
                  {{ range $item.Meta }}
                    <span class="inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-[11px] font-medium uppercase tracking-wide text-gray-600">{{ . }}</span>
                  {{ end }}
                </span>
              {{ end }}
            </span>
            <span class="flex flex-none items-center gap-1 text-xs font-medium text-indigo-600 transition group-hover:text-indigo-500">
              <span>{{ $item.ActionLabel }}</span>
              {{ template "icon" (dict "Name" (or $item.ActionIcon "chevron-right") "Class" "h-4 w-4") }}
            </span>
            </a>
          </div>
        </li>
      {{ end }}
    </ul>
  {{ end }}
</div>
{{ end }}
