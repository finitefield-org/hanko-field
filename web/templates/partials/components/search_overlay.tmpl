{{ define "component_search_overlay" }}
{{ $lang := .Lang }}
<div id="global-search-dialog" class="fixed inset-0 z-[60] hidden" data-search-overlay role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="global-search-title" aria-describedby="global-search-description" data-pin-label-add="{{ tlang $lang "search.pin.add" }}" data-pin-label-remove="{{ tlang $lang "search.pin.remove" }}">
  <div class="absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity" data-search-dismiss></div>
  <div class="relative mx-auto mt-16 w-full max-w-5xl px-4 py-6">
    <div class="relative overflow-hidden rounded-3xl border border-gray-200/80 bg-white/95 shadow-2xl">
      <div class="flex flex-col gap-4 border-b border-gray-100 bg-white/95 px-6 pb-4 pt-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h2 id="global-search-title" class="text-sm font-semibold text-gray-900">{{ tlang $lang "search.overlay.title" }}</h2>
            <p id="global-search-description" class="text-sm text-gray-500">{{ tlang $lang "search.overlay.subtitle" }}</p>
          </div>
          <div class="flex items-center gap-2">
            <span class="inline-flex items-center gap-1 rounded-full bg-gray-100 px-2.5 py-1 text-xs font-medium text-gray-600">
              <span>{{ tlang $lang "search.overlay.keyboard" }}</span>
              <span class="flex items-center gap-1 rounded bg-white px-1 py-0.5 text-[10px] font-semibold text-gray-700 shadow"><span>⌘</span><span>/</span><span>Ctrl</span><span>K</span></span>
            </span>
            <button type="button" class="inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-200 text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-close aria-label="{{ tlang $lang "search.overlay.close" }}">
              <svg class="h-5 w-5" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="5" y1="5" x2="19" y2="19"></line>
                <line x1="19" y1="5" x2="5" y2="19"></line>
              </svg>
            </button>
          </div>
        </div>
        <div class="flex items-center gap-2 rounded-2xl border border-gray-200 bg-gray-50/60 px-4 py-2.5 shadow-inner">
          <svg class="h-5 w-5 text-gray-400" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="11" cy="11" r="7"></circle>
            <path d="M20 20l-3.5-3.5"></path>
          </svg>
          <input id="global-search-input" type="search" class="h-9 w-full border-0 bg-transparent text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none" placeholder="{{ tlang $lang "search.overlay.placeholder" }}" autocomplete="off" data-search-input>
          <button type="button" class="inline-flex h-8 items-center gap-1 rounded-full border border-gray-200 bg-white px-3 text-xs font-medium text-gray-600 transition hover:border-indigo-200 hover:text-indigo-500 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-voice aria-label="{{ tlang $lang "search.overlay.voice" }}">
            <svg class="h-4 w-4" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 3a3 3 0 00-3 3v6a3 3 0 006 0V6a3 3 0 00-3-3z"></path>
              <path d="M19 10a7 7 0 01-14 0"></path>
              <path d="M12 17v4"></path>
              <path d="M8 21h8"></path>
            </svg>
            <span>{{ tlang $lang "search.overlay.voice" }}</span>
          </button>
        </div>
        <div class="flex items-center gap-2 pt-2" role="tablist" aria-labelledby="global-search-title" data-search-tabs>
          <button type="button" class="inline-flex items-center gap-2 rounded-full border border-indigo-200 bg-indigo-50 px-3 py-1.5 text-xs font-semibold text-indigo-600 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-tab data-source="products" role="tab" aria-selected="true" aria-controls="global-search-results">
            <span>{{ tlang $lang "search.tabs.products" }}</span>
            <span class="hidden rounded-full bg-indigo-100 px-1.5 py-0.5 text-[10px] font-semibold text-indigo-700" data-tab-count></span>
          </button>
          <button type="button" class="inline-flex items-center gap-2 rounded-full border border-transparent px-3 py-1.5 text-xs font-semibold text-gray-500 hover:border-gray-200 hover:text-gray-700 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-tab data-source="templates" role="tab" aria-selected="false" aria-controls="global-search-results">
            <span>{{ tlang $lang "search.tabs.templates" }}</span>
            <span class="hidden rounded-full bg-indigo-100 px-1.5 py-0.5 text-[10px] font-semibold text-indigo-700" data-tab-count></span>
          </button>
          <button type="button" class="inline-flex items-center gap-2 rounded-full border border-transparent px-3 py-1.5 text-xs font-semibold text-gray-500 hover:border-gray-200 hover:text-gray-700 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-tab data-source="guides" role="tab" aria-selected="false" aria-controls="global-search-results">
            <span>{{ tlang $lang "search.tabs.guides" }}</span>
            <span class="hidden rounded-full bg-indigo-100 px-1.5 py-0.5 text-[10px] font-semibold text-indigo-700" data-tab-count></span>
          </button>
          <button type="button" class="inline-flex items-center gap-2 rounded-full border border-transparent px-3 py-1.5 text-xs font-semibold text-gray-500 hover:border-gray-200 hover:text-gray-700 focus-visible:outline-none focus-visible:ring focus-visible:ring-indigo-500/40" data-search-tab data-source="accounts" role="tab" aria-selected="false" aria-controls="global-search-results">
            <span>{{ tlang $lang "search.tabs.accounts" }}</span>
            <span class="hidden rounded-full bg-indigo-100 px-1.5 py-0.5 text-[10px] font-semibold text-indigo-700" data-tab-count></span>
          </button>
        </div>
      </div>
      <div class="flex flex-col gap-6 px-6 pb-8 pt-2 lg:flex-row lg:gap-8">
        <div id="global-search-results" class="min-h-[320px] flex-1" role="region" aria-live="polite" aria-busy="false" data-search-results-target></div>
        <aside class="w-full space-y-6 border-t border-gray-100 pt-4 text-sm text-gray-600 lg:w-64 lg:border-l lg:border-t-0 lg:pl-6 lg:pt-0">
          <section>
            <div class="flex items-center justify-between pb-2">
              <h3 class="text-xs font-semibold uppercase tracking-wide text-gray-500">{{ tlang $lang "search.history.title" }}</h3>
              <button type="button" class="text-xs font-medium text-gray-400 hover:text-gray-600" data-search-history-clear hidden>{{ tlang $lang "search.history.clear" }}</button>
            </div>
            <ul class="space-y-1.5 text-sm" data-search-history>
              <li class="rounded-lg border border-dashed border-gray-200 bg-gray-50 px-3 py-2 text-xs text-gray-500" data-search-history-empty>{{ tlang $lang "search.history.empty" }}</li>
            </ul>
          </section>
          <section>
            <h3 class="pb-2 text-xs font-semibold uppercase tracking-wide text-gray-500">{{ tlang $lang "search.pins.title" }}</h3>
            <ul class="space-y-1.5 text-sm" data-search-pins>
              <li class="rounded-lg border border-dashed border-gray-200 bg-gray-50 px-3 py-2 text-xs text-gray-500" data-search-pins-empty>{{ tlang $lang "search.pins.empty" }}</li>
            </ul>
          </section>
          <section>
            <h3 class="pb-2 text-xs font-semibold uppercase tracking-wide text-gray-500">{{ tlang $lang "search.shortcuts.title" }}</h3>
            <ul class="space-y-1 text-xs text-gray-500">
              <li class="flex items-center justify-between rounded-lg border border-gray-100 bg-gray-50 px-3 py-2">
                <span>{{ tlang $lang "search.shortcuts.open" }}</span>
                <span class="flex items-center gap-1 rounded bg-white px-1 py-0.5 text-[10px] font-semibold text-gray-700 shadow"><span>⌘</span><span>/</span><span>Ctrl</span><span>K</span></span>
              </li>
              <li class="flex items-center justify-between rounded-lg border border-gray-100 bg-gray-50 px-3 py-2">
                <span>↓ / ↑</span>
                <span class="text-[11px] text-gray-600">Navigate results</span>
              </li>
              <li class="flex items-center justify-between rounded-lg border border-gray-100 bg-gray-50 px-3 py-2">
                <span>Enter</span>
                <span class="text-[11px] text-gray-600">Open highlighted</span>
              </li>
            </ul>
          </section>
        </aside>
      </div>
    </div>
  </div>
</div>
{{ end }}
